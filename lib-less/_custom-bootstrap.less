/* Imports Bootstrap from vendor dir and overrides variables with the
   Esper look and feel */
@import "../node_modules/bootstrap/less/bootstrap";

// Override variables
@import "./_bootstrap-variables";

// Tweak primary class
.btn-primary {
  font-weight: bold;
}

// Addition button classes
.btn-secondary {
  color: @link-color;
  background: transparent;
  border: 1px solid @link-color;
  transition: color 0.5s, background 0.5s;

  &:hover, &:active {
    color: white;
    background: @link-color;
  }
}

.btn-tertiary {
  color: rgba(255, 255, 255, 0.8);
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.8);
  transition: color 0.5s, border 0.5s;

  &:hover, &:active {
    color: white;
    border: 1px solid white;
  }

  &.active {
    color: @brand-text;
    background: rgba(255, 255, 255, 0.95);
  }
}

// Animations
.btn {
  transition: color 0.5s, border 0.5s, background-color 0.5s;
}

// Aliases
.button-primary { .btn-primary }
.button-secondary { .btn-secondary }
.button-tertiary { .btn-tertiary }
.left { .pull-left; }
.right { .pull-right; }


/*
  Global, generics
*/

body {
  text-rendering: optimizeLegibility;
  font-smoothing: antialiased;
}

label {
  color: @brand-text-header;
}

a.text-muted {
  color: @text-muted;

  &:hover, &:focus {
    color: @text-muted-hover;
  }
}


/*
  Minor tweaks to Bootstrap classes that don't normally make sense otherwise
  (or for stylistic reasons)
*/

// Override .btn-default
.btn-default:hover, .btn-default:focus {
  border: 1px solid @link-color;
  color: @link-color;
  background: @btn-default-bg;
  outline: none;

  .input-group & {
    z-index: 10; // So border stands out
  }
}

input.form-control, textarea.form-control, select.form-control {
  &:focus, &:hover {
    outline: none;
    border: 1px solid @link-color;
    box-shadow: none;
    z-index: 10;
  }

  .input-group & {
    z-index: 10; // So border stands out
  }
}


////

.container-fluid.padded {
  padding-left: @padding-base-horizontal;
  padding-right: @padding-base-horizontal;

  @media (max-width: @screen-xs-max) {
    .navbar & {
      padding-left: @grid-gutter-width / 2;
      padding-right: @grid-gutter-width / 2;
    }
  }

  @media (min-width: @screen-sm-min) {
    .navbar-right {
      margin-right: 0;
    }
  }
}

.list-group-item.one-line {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;

  // This helps floated badges behave more nicely with an accompanying label
  label {
    display: block;
    text-overflow: ellipsis;
    overflow-x: hidden;
  }
}

.list-group-item-success,
.list-group-item-info,
.list-group-item-warning,
.list-group-item-danger, {
  z-index: 1;
}

.list-group-item-success {
  border: 1px solid @state-success-border;
}

.list-group-item-info {
  border: 1px solid @state-info-border;
}

.list-group-item-warning {
  border: 1px solid @state-warning-border;
}

.list-group-item-danger {
  border: 1px solid @state-danger-border;
}

.list-group.compact {
  margin-bottom: 0;

  .list-group-item {
    padding: @padding-small-horizontal;
    border-left: 0;
    border-right: 0;

    &:first-child {
      border-top: 0;
    }

    &:last-child {
      border-bottom: 0;
    }
  }
}

a {
  cursor: pointer; // No href required

  &.active {
    cursor: default;
  }
}

.alert.compact {
  margin-bottom: @alert-padding;
}

.navbar-brand {
  line-height: @navbar-height - (@navbar-padding-vertical * 2);
  vertical-align: middle;

  img {
    height: @navbar-height - (@navbar-padding-vertical * 2);
    width: auto;
    margin: 0 @navbar-padding-horizontal;
  }

  &.lg {
    line-height: @navbar-height - (@navbar-padding-vertical * 4/3);
    padding-top: @navbar-padding-vertical * 2/3;
    padding-bottom: @navbar-padding-vertical * 2/3;

    img {
      height: @navbar-height - (@navbar-padding-vertical * 4/3);
      margin: 0 (@navbar-padding-horizontal * 2/3);
    }
  }
}

.nav > li > a:hover, .nav > li > a:focus {
  background-color: rgba(255, 255, 255, 0.8);
  color: rgba(0, 0, 0, 0.8);
}

.navbar-default .btn-default.navbar-btn {
  border-color: @navbar-default-border;
  color: @navbar-default-border;

  &:hover, &:focus {
    background: @navbar-default-border;
    color: white;
  }
}

.navbar-toggle {
  padding: @padding-base-vertical @padding-base-horizontal;
}


////

.progress.skinny {
  height: 3px;
  border-radius: 0;
  margin: 0;
}


/* FontAwesome Tweaks */

.navbar-nav > li > a > .fa,
.btn .fa {
  line-height: @line-height-computed;
}

.fa.bs-height {
  line-height: @line-height-computed;
}


////

.list-group {
  margin-bottom: @padding-large-vertical;
}


////

.modal-body .modal-footer, .panel-body .modal-footer {
  padding: @modal-inner-padding 0 0 0;
}

.modal-body .alert {
  margin-bottom: @modal-inner-padding;
}

.panel-body .alert {
  margin-bottom: @panel-body-padding;
}

.modal-body, .panel-body {
  .alert:last-child {
    margin-bottom: 0;
  }
}


//////

.dropdown {
  .dropdown-menu {
    min-width: 100%;

    > li > a {
      &:hover, &:focus {
        opacity: 1.0;
      }
    }
  }
}

input.form-control.dropdown-toggle[readonly], .dropdown-toggle {
  background: @input-bg;
  float: none;
  cursor: pointer;
}


/* Fix corner rounding with nested inputs */

.input-group {
  > div:not(:first-child) {
    .form-control {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
  }

  > div:last-child {
    .form-control:last-child, .form-control.end-of-group {
      border-top-right-radius: @input-border-radius;
      border-bottom-right-radius: @input-border-radius;

      &.input-sm {
        border-top-right-radius: @input-border-radius-small;
        border-bottom-right-radius: @input-border-radius-small;
      }

      &.input-lg {
        border-top-right-radius: @input-border-radius-large;
        border-bottom-right-radius: @input-border-radius-large;
      }
    }
  }
}


/* Navbar styling for mobile */

@media (max-width: @screen-xs-max) {
  .navbar-collapse, .esper-collapse {
    .navbar-nav + .navbar-nav {
      padding-top: (@navbar-padding-vertical / 2);
      border-top: 1px solid @dropdown-divider-bg;
    }

    .padded & {
      .navbar-nav {
        padding-left: @padding-base-horizontal;
        padding-right: @padding-base-horizontal;
      }
    }
  }
}

.navbar-default .navbar-toggle {
  border: 0;
  color: @navbar-default-link-color;
  cursor: pointer;

  &:hover, &:focus {
    background-color: transparent;
    color: @navbar-default-link-hover-color;
  }
}

.alert a {
  font-weight: bold;
}

.alert-success a {
  color: @brand-success;
  &:hover { color: @brand-success; }
}

.alert-info a {
  color: @brand-info;
  &:hover { color: @brand-info; }
}

.alert-warning a {
  color: @brand-warning;
  &:hover { color: @brand-warning; }
}

.alert-danger a {
  color: @brand-danger;
  &:hover { color: @brand-danger; }
}


